<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Druvienas ‚Äî mƒÅjas lietotne (Stage 0)</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  :root{--bg:#0f1115;--panel:#141820;--ink:#e8eaee;--muted:#9aa3b2;--border:#1f2532;--accent:#4b8cff}
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .app{max-width:1100px;margin:0 auto;padding:16px}
  header{display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:10;background:var(--bg);margin-bottom:12px}
  .title{margin:0;font-size:18px;font-weight:800}
  .controls{display:flex;align-items:center;gap:8px}
  .btn{border:1px solid var(--border);background:#121723;color:var(--ink);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn.active{outline:2px solid var(--accent)}
  /* –º–∏–Ω–∏-–ª–æ–≥–æ—Ç–∏–ø —Å–ø—Ä–∞–≤–∞ –≤ —Ö–µ–¥–µ—Ä–µ */
  .miniLogo{width:32px;height:32px;border-radius:8px;display:none;cursor:pointer;border:1px solid var(--border);background:#121723;padding:2px}
  .miniLogo img{display:block;width:100%;height:100%;object-fit:cover;border-radius:6px}

  /* –º–∞–∫–µ—Ç: —Å–ª–µ–≤–∞ —Ä–∞–±–æ—á–∞—è –∑–æ–Ω–∞ (–ª–æ–≥–æ—Ç–∏–ø/–∫–æ–Ω—Ç–µ–Ω—Ç), —Å–ø—Ä–∞–≤–∞ –º–µ–Ω—é */
  .grid{display:grid;grid-template-columns:1fr 320px;gap:16px}
  @media (max-width:900px){.grid{grid-template-columns:1fr}}

  .card{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:14px}
  /* —Ä–∞–±–æ—á–∞—è –∑–æ–Ω–∞ (—Å—é–¥–∞ –≥—Ä—É–∑–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç) */
  .work{min-height:360px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
  .homeBox{display:flex;flex-direction:column;align-items:center;gap:10px}
  .homeLogo{width:min(78%,420px);height:auto;border-radius:12px;box-shadow:0 16px 40px rgba(0,0,0,.35)}
  .homeHint{color:var(--muted);font-size:13px}

  /* –ø—Ä–∞–≤—ã–π –±–ª–æ–∫: –º–µ–Ω—é */
  .menu .item{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:#121723;cursor:pointer;margin-bottom:10px}
  .menu .item:hover{outline:2px solid rgba(75,140,255,.5)}
  .sectionTitle{font-weight:800;margin:0 0 8px}
  .sectionText{color:var(--muted);line-height:1.5}

  /* –∫–æ–≥–¥–∞ —Ä–∞–∑–¥–µ–ª –æ—Ç–∫—Ä—ã—Ç: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–∏–Ω–∏-–ª–æ–≥–æ */
  .compact .miniLogo{display:block}
</style>
</head>
<body>
  <div class="app">
    <header>
      <h3 class="title" id="pageTitle">Druvienas iela 36 ‚Äî ‚Ä¶</h3>
      <div class="controls">
        <div class="miniLogo" id="miniHome" title="–ù–∞ –≥–ª–∞–≤–Ω—ã–π">
          <img src="./house.png" alt="home">
        </div>
        <button id="ruBtn" class="btn">üá∑üá∫ RU</button>
        <button id="lvBtn" class="btn">üá±üáª LV</button>
      </div>
    </header>

    <div class="grid">
      <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê: —Ä–∞–±–æ—á–∞—è –∑–æ–Ω–∞ -->
      <div class="card work" id="workArea">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div class="homeBox" id="homeView">
          <img class="homeLogo" src="./house.png" alt="–î–æ–º">
          <div class="homeHint" id="homeHint">–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç —Å–ø—Ä–∞–≤–∞, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Ä–∞–∑–¥–µ–ª</div>
        </div>
        <!-- –ó–¥–µ—Å—å –±—É–¥–µ–º –ø–æ–¥–º–µ–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div id="contentView" style="display:none;width:100%"></div>
      </div>

      <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –º–µ–Ω—é -->
      <div class="card menu" id="menu">
        <!-- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
      </div>
    </div>
  </div>

<script>
  // Telegram init
  const tg = window.Telegram?.WebApp; tg?.ready(); tg?.expand();
  const user = tg?.initDataUnsafe?.user;
  const displayName = user?.first_name || (user?.username ? '@'+user.username : 'guest');
  document.getElementById('pageTitle').textContent = `Druvienas iela 36 ‚Äî ${displayName}`;

  // –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
  const L = {
    ru: {
      menu: {
        results: '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π',
        docs:    '–î–æ–∫—É–º–µ–Ω—Ç—ã',
        qa:      '–í–æ–ø—Ä–æ—Å—ã / –û—Ç–≤–µ—Ç—ã',
        plan:    '–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ä–∞–±–æ—Ç—ã'
      },
      sections: {
        results: { title:'–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π', text:'–ó–¥–µ—Å—å –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤.' },
        docs:    { title:'–î–æ–∫—É–º–µ–Ω—Ç—ã',              text:'–†–∞–∑–¥–µ–ª –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞).' },
        qa:      { title:'–í–æ–ø—Ä–æ—Å—ã / –û—Ç–≤–µ—Ç—ã',       text:'–†–∞–∑–¥–µ–ª Q&A (–∑–∞–≥–ª—É—à–∫–∞).' },
        plan:    { title:'–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ä–∞–±–æ—Ç—ã',     text:'–†–∞–∑–¥–µ–ª —Å –ø–ª–∞–Ω–∞–º–∏ (–∑–∞–≥–ª—É—à–∫–∞).' },
      }
    },
    lv: {
      menu: {
        results: 'Balso≈°anas rezultƒÅti',
        docs:    'Dokumenti',
        qa:      'JautƒÅjumi / Atbildes',
        plan:    'PlƒÅnotie darbi'
      },
      sections: {
        results: { title:'Balso≈°anas rezultƒÅti', text:'Te vƒìlƒÅk b≈´s interaktƒ´vs.' },
        docs:    { title:'Dokumenti',            text:'Dokumentu sadaƒºa (vietturis).' },
        qa:      { title:'JautƒÅjumi / Atbildes', text:'J&A sadaƒºa (vietturis).' },
        plan:    { title:'PlƒÅnotie darbi',       text:'PlƒÅnoto darbu sadaƒºa (vietturis).' },
      }
    }
  };
  let lang = (user?.language_code || 'ru').toLowerCase().startsWith('lv') ? 'lv' : 'ru';

  const ruBtn = document.getElementById('ruBtn');
  const lvBtn = document.getElementById('lvBtn');
  const menuEl = document.getElementById('menu');
  const appEl  = document.querySelector('.app');
  const work   = document.getElementById('workArea');
  const homeView = document.getElementById('homeView');
  const contentView = document.getElementById('contentView');
  const miniHome = document.getElementById('miniHome');

  ruBtn.onclick = () => { lang='ru'; renderMenu(); if (!contentViewVisible()) updateLangInContent(); setLangButtons();};
  lvBtn.onclick = () => { lang='lv'; renderMenu(); if (!contentViewVisible()) updateLangInContent(); setLangButtons();};

  function setLangButtons(){
    ruBtn.classList.toggle('active', lang==='ru');
    lvBtn.classList.toggle('active', lang==='lv');
  }

  const MENU = ['results','docs','qa','plan'];

  function renderMenu(){
    const t = L[lang].menu;
    menuEl.innerHTML='';
    MENU.forEach(id=>{
      const item = document.createElement('div');
      item.className = 'item';
      item.innerHTML = `<span>${t[id]}</span><span>‚Ä∫</span>`;
      item.onclick = () => openSection(id);
      menuEl.appendChild(item);
    });
  }

  function openSection(id){
    // –≤–∫–ª—é—á–∞–µ–º compact-—Ä–µ–∂–∏–º: –º–∏–Ω–∏-–ª–æ–≥–æ —Ä—è–¥–æ–º —Å RU/LV
    document.body.classList.add('compact');
    homeView.style.display = 'none';
    contentView.style.display = 'block';
    // —Ä–µ–Ω–¥–µ—Ä–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç
    const sec = L[lang].sections[id];
    contentView.innerHTML = `
      <div class="sectionTitle">${sec.title}</div>
      <div class="sectionText">${sec.text}</div>
    `;
  }

  function contentViewVisible(){ return homeView.style.display === 'none'; }

  // –º–∏–Ω–∏-–ª–æ–≥–æ—Ç–∏–ø: –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π
  miniHome.onclick = () => {
    document.body.classList.remove('compact');
    contentView.style.display = 'none';
    homeView.style.display = 'flex';
  };

  function updateLangInContent(){
    // –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –ø–æ–¥—Å–∫–∞–∑–∫–∞; —Ç–µ–∫—Å—Ç—ã —Ä–∞–∑–¥–µ–ª–æ–≤ –ø–µ—Ä–µ—Ä–∏—Å—É—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
    document.getElementById('homeHint').textContent =
      lang==='lv' ? 'Izvƒìlieties sadaƒºu labajƒÅ pusƒì, lai atvƒìrtu to' :
                    '–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç —Å–ø—Ä–∞–≤–∞, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Ä–∞–∑–¥–µ–ª';
  }

  // init
  setLangButtons();
  renderMenu();
  updateLangInContent();
</script>
</body>
</html>
